:root{
  --navy:#001f3f;
  --green:#2E8B57;
  --red:#C53030;
  --bg:#FBF8F3;
  --muted:#222;
}
*{box-sizing:border-box}
.body-bg{
  background-image: url('assets/stitch_pattern.svg'), linear-gradient(180deg, rgba(255,255,255,0.6), rgba(250,250,250,0.9));
  background-repeat: repeat, no-repeat;
  background-size: 160px 160px, cover;
  background-position: top center, center;
}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;background-color:var(--bg);color:var(--muted);-webkit-font-smoothing:antialiased}
.topbar{display:flex;align-items:center;padding:12px 18px;border-bottom:6px solid var(--navy);background:linear-gradient(180deg, rgba(255,255,255,0.6), rgba(250,250,250,0.9))}
.logo{display:flex;align-items:center;gap:12px}
.logo img{width:48px;height:48px}
.site-title{font-family: 'Varsity', Georgia, 'Times New Roman', serif; font-weight:700; color:var(--navy); margin:0}
.site-title .subtitle{display:block;font-weight:400;font-size:12px;color:#666}
.scoreboard{margin-left:24px;display:flex;gap:12px;margin-right:auto}
.score-item{background:linear-gradient(180deg,#fff,#f3f6ff);padding:6px 10px;border-radius:6px;border:1px solid #e0e7ff;font-weight:700;color:var(--navy);box-shadow:0 2px 6px rgba(0,0,0,0.06)}
.score-val{display:block;font-size:14px}
.top-actions{display:flex;gap:8px}
.grid{display:grid;grid-template-columns:280px 1fr 360px;gap:16px;padding:20px;height:calc(100vh - 160px);align-items:start}
.left{overflow:auto;padding:12px}
.right{overflow:auto;padding:12px}
.center{display:flex;flex-direction:column;gap:12px;align-items:stretch;justify-content:flex-start}
.app-shell{display:flex;align-items:center;justify-content:center}

label{display:flex;justify-content:space-between;align-items:center;margin:8px 0}
input[type=range]{width:160px}
input[type=number]{width:80px}
select,button,input[type=number]{padding:8px;border-radius:10px;border:1px solid #d6d9e6;background:#fff}
.card{background:#fff;border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(20,30,80,0.06)}
.btn-row{display:flex;gap:8px;margin:8px 0}
.primary{background:var(--navy);color:#fff;border:none}
.primary:hover{background:#13304f}
button{cursor:pointer;border-radius:10px;padding:8px 12px;border:2px solid var(--red);background:transparent;color:var(--navy);font-weight:700}
button:hover{transform:translateY(-1px)}

.math .latex{background:#fff;padding:8px;border-radius:6px;border:1px dashed #ddd}
.log pre{height:160px;overflow:auto;background:#111;color:#fff;padding:8px;border-radius:6px}
.footer{padding:12px;text-align:center;border-top:1px solid #eee;font-size:13px;color:#888}
@media(max-width:1000px){.grid{grid-template-columns:1fr;padding:12px;height:auto}}

.ffn .hidden-neuron{border:1px solid #eee;padding:8px;border-radius:6px;margin:6px 0;background:#fff}
.ffn label{display:inline-flex;align-items:center;gap:6px;margin-right:8px}
.ffn input[type=number]{width:80px}
.challenge-desc{margin:8px 0;padding:8px;background:#fff;border-radius:6px;border:1px dashed #ddd}
.challenge-hint{margin-top:8px;padding:8px;background:#fff8e6;border-radius:6px;border:1px solid #f0d89b}
.hint-area button{margin-right:6px}
.challenge-feedback{margin-top:8px;font-weight:600}

/* Trainer card */
.trainer-card{display:flex;flex-direction:column;align-items:center;gap:12px;padding:18px;border-radius:14px;background:linear-gradient(180deg,#fff,#fbfdff);box-shadow:0 12px 30px rgba(10,20,50,0.08)}
.trainer-display{font-size:120px;font-weight:900;color:var(--navy);width:360px;height:160px;display:flex;align-items:center;justify-content:center;border-radius:12px;background:linear-gradient(180deg,#fff,#f0f6ff);border:2px solid #e6eefc}
.trainer-meta{font-size:16px;color:#666}
.trainer-controls{display:flex;gap:12px}
.trainer-settings{display:flex;flex-direction:column;gap:8px;width:100%;margin-top:6px}
.pitch-call{font-size:18px;font-weight:700;color:var(--red)}

/* Animation */
.pop-in{animation:popIn 300ms ease both}
@keyframes popIn{0%{transform:scale(0.85);opacity:0}100%{transform:scale(1);opacity:1}}

@media(max-width:800px){
  .grid{grid-template-columns:1fr;padding:12px;height:auto}
  .trainer-display{font-size:72px;width:100%;height:120px}
  button{padding:8px 10px}
}
